#!/bin/bash

# 获取触摸板设备名称
TOUCHPAD_DEVICE=$(hyprctl devices | grep -A 1 "asue120d:00-04f3:31fb-touchpad" | head -1 | sed 's/^[[:space:]]*//')

if [ -z "$TOUCHPAD_DEVICE" ]; then
    # 如果没找到具体设备，尝试通用方法
    TOUCHPAD_DEVICE=$(hyprctl devices | grep -i touchpad | head -1 | sed 's/^[[:space:]]*//')
fi

if [ -z "$TOUCHPAD_DEVICE" ]; then
    notify-send "Touchpad" "No touchpad device found"
    exit 1
fi

# 检查当前触摸板状态并切换
CURRENT_STATE=$(hyprctl getoption input:touchpad:enabled -j | jq -r '.int')

if [ "$CURRENT_STATE" = "1" ]; then
    hyprctl keyword input:touchpad:enabled false
    notify-send "Touchpad" "Disabled"
else
    hyprctl keyword input:touchpad:enabled true
    notify-send "Touchpad" "Enabled"
fi
